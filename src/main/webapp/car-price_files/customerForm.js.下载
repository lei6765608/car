var cuecollectionType = 1;
var f = false;
var trackingCodeType = "";


var browser = {
    versions: function () {
        var u = navigator.userAgent, app = navigator.appVersion;
        return {
            trident: u.indexOf('Trident') > -1, // IE
            presto: u.indexOf('Presto') > -1, // opera
            webKit: u.indexOf('AppleWebKit') > -1, // Apple or Chrome
            gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') == -1, // Firfox
            mobile: !!u.match(/AppleWebKit.*Mobile/)
            || !!u.match(/Windows Phone/) || !!u.match(/Android/)
            || !!u.match(/MQQBrowser/), // mobile
            ios: !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/), // ios
            android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1, // android
            iPhone: u.indexOf('iPhone') > -1, // iPhone or QQHD
            iPad: u.indexOf('iPad') > -1, // iPad
            webApp: u.indexOf('Safari') == -1
        };
    }()
};
if (browser.versions.ios || browser.versions.android || browser.versions.iPhone
    || browser.versions.iPad) {
    trackingCodeType = "m";
} else {
    trackingCodeType = "pc";
}


function submit(num, type) {
    if (type == undefined) {
        type = cuecollectionType;
    }
    var sysId = $("#saveSystemID").val();
    if (sysId != "") {
        type = "1";
    }

    if (num == 1) {
        _smq.push(['custom', trackingCodeType + '/买车表单_主视觉', '提交', new Date()]);
    }
    if (num == 2) {
        _smq.push(['custom', trackingCodeType + '/卖车表单_主视觉', '提交', new Date()]);
    }
    if (num == 3) {
        _smq.push(['custom', trackingCodeType + '/我要置换表单_主视觉', '提交', new Date()]);
    }


    f = judgeForm(num);

    // 验证发送
    if (f) {
        var imgCode = $("#imgCode" + num).val();
        var phoCode = $("#phoCode" + num).val();

        $("[name = 'c_dealercode']").attr("value", $("#openfireto").val());
        var formData = "";
        if (num == 1) {
            formData = $("#formf1").serialize();
            formData = formData + "&c_wantcartype=" + $("#form" + num + "yxcxing").attr("value");
        }
        if (num == 2) {
            formData = $("#formf2").serialize();
            formData = formData + "&c_sellcartype=" + $("#form" + num + "xyccxing").attr("value");
        }
        if (num == 3) {
            formData = $("#formf3").serialize();
            formData = formData + "&c_sellcartype=" + $("#form" + num + "xyccxing").attr("value");
        }
        $.ajax({
            url: path + "/addClueCollection",
            data: formData + "&formPhoCode=" + phoCode + "&formImgCode="
            + imgCode + "&codeType=" + type + "&sysId=" + sysId,
            async: false,
            success: function (res) {
                var json = JSON.parse(res);
                if (json.mes == "sendSuc") {
                    $(".background,.popup_w").css('display', 'none');
                    if (cuecollectionType == 1) {
                        sendToRoom(json.clueCollection, 3);
                        showPopup(json.val, "");
                    } else {
                        //shouAlertPopup();
                        if (sysId != "") {
                            onLineToTake();
                        }
                    }
                    $("#imgCode" + num + "Prompt").html("<span><img src='" + path + "/images/manage/prompt.png'></span>请输入图形验证码");
                    $("#phoCode" + num + "Prompt").html("<span><img src='" + path + "/images/manage/prompt.png'></span>请输入验证码");
                } else {
                    if (cuecollectionType == 1) {
                        if (json.val == "图形验证码有误") {
                            $("#imgCode" + num + "Prompt").html("<span><img src='" + path + "/images/manage/prompt.png'></span>图形验证码错误");
                            $("#imgCode" + num + "Prompt").attr("style", "display:;");
                        } else if (json.val == "手机验证码有误,请重新获取") {
                            $("#phoCode" + num + "Prompt").html("<span><img src='" + path + "/images/manage/prompt.png'></span>验证码错误");
                            $("#phoCode" + num + "Prompt").attr("style", "display:;");
                        } else {
                        }
                    }
                }
            }
        });
    }
}

function submitnews(num, type) {
    if (type == undefined) {
        type = cuecollectionType;
    }
    var sysId = $("#saveSystemID").val();
    // alert(sysId)
    if (sysId != "") {
        type = "1";
    }
    if (num == 1) {
        _smq.push(['custom', trackingCodeType + '/买车表单_主视觉', '提交', new Date()]);
    }
    if (num == 2) {
        _smq.push(['custom', trackingCodeType + '/卖车表单_主视觉', '提交', new Date()]);
    }
    if (num == 3) {
        _smq.push(['custom', trackingCodeType + '/我要置换表单_主视觉', '提交', new Date()]);
    }
    if (num == 4) {
        _smq.push(['custom', trackingCodeType + '/我要找车表单_主视觉', '提交', new Date()]);
    }

    //f = judgeForm(num);
    f=checkForm(num);
    // 验证发送
    if (f) {
        var imgCode = $("#imgCode" + num).val();
        var phoCode = $("#phoCode" + num).val();

        $("[name = 'c_dealercode']").attr("value", $("#openfireto").val());
        var formData = "";

        if (num == 1) {
            formData = $("#formf1").serialize();
            formData = formData + "&c_wantcartype=" + $("#form" + num + "yxcxing").attr("value");
        }

        if (num != 1) {
            $.ajax({
                url:path+"/judgeUserSession",
                success:function(res){
                    var josn = JSON.parse(res);
                    if(josn == "notlogin"){
                        var phone = $("#form"+num+"sjh").val();

                        var imgCode = "";
                        var phoCode = "";

                        $.ajax({
                            url:path+"/easyRegisterUser",
                            data:"easyRegPhone="+phone+"&easyRegImgCode="+imgCode+"&easyRegPhoCode"+phoCode,
                            type:"post",
                            success:function(res){
                                formData = $("#formf" + num).serialize();
                                formFlag = num;

                                $.ajax({
                                    url: path + "/addClueCollection",
                                    data: formData + "&sysId=" + sysId,
                                    async: false,
                                    success: function (res) {
                                        var json = JSON.parse(res);
                                        if (json.mes == "sendSuc") {
                                            $(".background,.popup_w").css('display', 'none');
                                            var customerRegion = "";
                                            var customerWantCarType = $("#form" + num + "yxcx").val();
                                            var customerWantBuy = $("#form" + num + "jg").val() + "万元";
                                            var customerRegionId = $("#sessionCity").val();
                                            if (type == 4 || type == 5) {
                                                formFlag = type
                                            }

                                            startGrab(customerRegion, customerWantCarType, customerWantBuy, customerRegionId, formFlag);
                                            $('body').removeClass('active_w');
                                        }
                                    }
                                });
                            },
                        });
                    }else{

                        formData = $("#formf" + num).serialize();
                        formFlag = num;

                        $.ajax({
                            url: path + "/addClueCollection",
                            data: formData + "&sysId=" + sysId,
                            async: false,
                            success: function (res) {
                                var json = JSON.parse(res);
                                if (json.mes == "sendSuc") {
                                    $(".background,.popup_w").css('display', 'none');
                                    var customerRegion = "";
                                    var customerWantCarType = $("#form" + num + "yxcx").val();
                                    var customerWantBuy = $("#form" + num + "jg").val() + "万元";
                                    var customerRegionId = $("#sessionCity").val();
                                    if (type == 4 || type == 5) {
                                        formFlag = type
                                    }

                                    startGrab(customerRegion, customerWantCarType, customerWantBuy, customerRegionId, formFlag);
                                    $('body').removeClass('active_w');
                                }
                            }
                        });
                    }



                }
            });
        } else {
            $.ajax({
                url: path + "/addClueCollection",
                data: formData + "&formPhoCode=" + phoCode + "&formImgCode="
                + imgCode + "&codeType=" + type + "&sysId=" + sysId,
                async: false,
                success: function (res) {
                    var json = JSON.parse(res);
                    if (json.mes == "sendSuc") {
                        $(".background,.popup_w").css('display', 'none');
                        if (cuecollectionType == 1) {
                            sendToRoom(json.clueCollection, 3);
                            showPopup(json.val, "");
                        } else {
                            //if(num != 3 && num != 4){
                            shouAlertPopuplianxi();
                            //	}
                            if (sysId != "") {
                                onLineToTake();
                            }
                        }
                        $("#imgCode" + num + "Prompt").html("<span><img src='" + path + "/images/manage/prompt.png'></span>请输入图形验证码");
                        $("#phoCode" + num + "Prompt").html("<span><img src='" + path + "/images/manage/prompt.png'></span>请输入验证码");
                        $('body').removeClass('active_w');
                    } else {
                        if (cuecollectionType == 1) {
                            if (json.val == "图形验证码有误") {
                                $("#imgCode" + num + "Prompt").html("<span><img src='" + path + "/images/manage/prompt.png'></span>图形验证码错误");
                                $("#imgCode" + num + "Prompt").attr("style", "display:;");
                            } else if (json.val == "手机验证码有误,请重新获取") {
                                $("#phoCode" + num + "Prompt").html("<span><img src='" + path + "/images/manage/prompt.png'></span>验证码错误");
                                $("#phoCode" + num + "Prompt").attr("style", "display:;");
                            } else {
                            }
                        }
                    }
                }
            });
        }
    }
}


// 验证表单内容
function judgeForm(num) {
    var f1 = false;
    var f2 = true;
    if (num == 1) {
        var list = new Array();
        list.push("form1yxgcdq");
        list.push("form1yxcxi");
        list.push("form1yxcxing");
        list.push("form1jg");
        list.push("form1lxrxm");
        list.push("form1sjh");
        list.push("imgCode1");
        list.push("phoCode1");
        for (i in list) {
            var val = $("#" + list[i]).val();
            if (val != "" && val != null && val != "请选择" && val != "请输入") {
                $("#" + list[i] + "Prompt").attr("style", "display: none");
                f1 = true;
            } else {
                if ($("#" + list[i]).attr("value") != undefined && $("#" + list[i]).attr("value") != "") {
                    f1 = true;
                } else {
                    $("#" + list[i] + "Prompt").attr("style", "display: ");
                    f2 = false;
                }
            }
        }
        f1 = jugeSjh("form" + num + "sjh", num);
        f1 = jugeTxYzm("imgCode" + num, num);
        f1 = jugeSjYzm("phoCode" + num, num);
        if (f1 == true && f2 == true) {
            f = true;
        } else {
            f = false;
        }
    }
    if (num == 2) {
        var list = new Array();
        list.push("form2yxgcdq");
        list.push("form2lxrxm");
        list.push("form2sjh");
        list.push("form2xycpp");
        list.push("form2czcx");
        list.push("form2spdq");
        list.push("form2xslc");
        list.push("form2yxcx");
        list.push("form2jg");

        for (i in list) {
            var val = $("#" + list[i]).val();
            if (val != "" && val != null && val != "请选择" && val != "请输入") {
                $("#" + list[i] + "Prompt").attr("style", "display: none");
                f1 = true;
            } else {
                if ($("#" + list[i]).attr("value") != undefined && $("#" + list[i]).attr("value") != "") {
                    f1 = true;
                } else {
                    $("#" + list[i] + "Prompt").attr("style", "display: ");
                    f2 = false;
                }
            }
        }
        f1 = jugeSjh("form" + num + "sjh", num);
        if (f1 == true) {
            f = true;
        } else {
            f = false;
        }
    }
    if (num == 3) {
        var list = new Array();
        list.push("form3yxgcdq");
        list.push("form3lxrxm");
        list.push("form3sjh");
        list.push("form3xycpp");
        list.push("form3czcx");
        list.push("form3spdq");
        list.push("form3xslc");
        list.push("form3yxcx");

        for (i in list) {
            var val = $("#" + list[i]).val();
            if (val != "" && val != null && val != "请选择" && val != "请输入") {
                $("#" + list[i] + "Prompt").attr("style", "display: none");
                f1 = true;
            } else {
                if ($("#" + list[i]).attr("value") != undefined && $("#" + list[i]).attr("value") != "") {
                    f1 = true;
                } else {
                    $("#" + list[i] + "Prompt").attr("style", "display: ");
                    f2 = false;
                }
            }
        }
        f1 = jugeSjh("form" + num + "sjh", num);
        if (f1 == true) {
            f = true;
        } else {
            f = false;
        }
    }
    if(num==4){
        var list = new Array();
        list.push("form4yxgcdq");
        list.push("form4lxrxm");
        list.push("form4sjh");
        list.push("form4xycpp");
        list.push("form4czcx");
        list.push("form4spdq");
        list.push("form4xslc");
        list.push("form4yxcx");

        for (i in list) {
            var val = $("#" + list[i]).val();
            if (val != "" && val != null && val != "请选择" && val != "请输入") {
                $("#" + list[i] + "Prompt").attr("style", "display: none");
                f1 = true;
            } else {
                if ($("#" + list[i]).attr("value") != undefined && $("#" + list[i]).attr("value") != "") {
                    f1 = true;
                } else {
                    $("#" + list[i] + "Prompt").attr("style", "display: ");
                    f2 = false;
                }
            }
        }
        f1 = jugeSjh("form" + num + "sjh", num);
        if (f1 == true) {
            f = true;
        } else {
            f = false;
        }
    }
    return f;
}


$(function () {
    //买车表单
    var test = trackingCodeType + "/买车表单_主视觉";
    $("#form1yxgcdq").click(function () {
        _smq.push(['custom', test, '意向购车地区', new Date()]);
    });
    $("#form1yxcxi").click(function () {
        _smq.push(['custom', test, '意向车系', new Date()]);
    });
    $("#form1yxcxing").click(function () {
        _smq.push(['custom', test, '意向车型', new Date()]);
    });
    $("#form1jg").click(function () {
        _smq.push(['custom', test, '价格', new Date()]);
    });
    $("#form1lcs").click(function () {
        _smq.push(['custom', test, '里程数', new Date()]);
    });
    $("#form1cl").click(function () {
        _smq.push(['custom', test, '车龄', new Date()]);
    });
    $("#form1bsx").click(function () {
        _smq.push(['custom', test, '变速箱', new Date()]);
    });
    $("#form1pfbz").click(function () {
        _smq.push(['custom', test, '排放标准', new Date()]);
    });
    $("#form1pl").click(function () {
        _smq.push(['custom', test, '排量', new Date()]);
    });
    $("#form1ys").click(function () {
        _smq.push(['custom', test, '颜色', new Date()]);
    });
    $("#form1lxrxm").click(function () {
        _smq.push(['custom', test, '联系人姓名', new Date()]);
    });
    $("#form1sjh").click(function () {
        _smq.push(['custom', test, '手机号', new Date()]);
    });
    $("#imgCode1").click(function () {
        _smq.push(['custom', test, '图形验证码', new Date()]);
    });
    $("#phoCode1").click(function () {
        _smq.push(['custom', test, '验证码', new Date()]);
    });
});
$(function () {
    //卖车表单
    var test = trackingCodeType + "/卖车表单_主视觉";
    $("#form2yxgcdq").click(function () {
        _smq.push(['custom', test, '意向购车地区', new Date()]);
    });
    $("#form2lxrxm").click(function () {
        _smq.push(['custom', test, '联系人姓名', new Date()]);
    });
    $("#form2sjh").click(function () {
        _smq.push(['custom', test, '手机号', new Date()]);
    });
    $("#form2xycpp").click(function () {
        _smq.push(['custom', test, '现有车辆品牌', new Date()]);
    });
    $("#form2czcx").click(function () {
        _smq.push(['custom', test, '车主车型', new Date()]);
    });
    $("#form2spdq").click(function () {
        _smq.push(['custom', test, '上牌地区', new Date()]);
    });
    $("#form2xslc").click(function () {
        _smq.push(['custom', test, '行驶里程', new Date()]);
    });
    $("#form2yxcx").click(function () {
        _smq.push(['custom', test, '意向车型', new Date()]);
    });
    $("#form2jg").click(function () {
        _smq.push(['custom', test, '价格', new Date()]);
    });

});
$(function () {
    //我要置换表单
    var test = trackingCodeType + "/我要置换表单_主视觉";
    $("#form3yxgcdq").click(function () {
        _smq.push(['custom', test, '意向购车地区', new Date()]);
    });
    $("#form3lxrxm").click(function () {
        _smq.push(['custom', test, '联系人姓名', new Date()]);
    });
    $("#form3sjh").click(function () {
        _smq.push(['custom', test, '手机号', new Date()]);
    });
    $("#form3xycpp").click(function () {
        _smq.push(['custom', test, '现有车辆品牌', new Date()]);
    });
    $("#form3czcx").click(function () {
        _smq.push(['custom', test, '车主车型', new Date()]);
    });
    $("#form3spdq").click(function () {
        _smq.push(['custom', test, '上牌地区', new Date()]);
    });
    $("#form3xslc").click(function () {
        _smq.push(['custom', test, '行驶里程', new Date()]);
    });
    $("#form3yxcx").click(function () {
        _smq.push(['custom', test, '意向车型', new Date()]);
    });
    $("#form3jg").click(function () {
        _smq.push(['custom', test, '价格', new Date()]);
    });
});

$(function () {
    //我要找车表单
    var test = trackingCodeType + "/我要找车表单_主视觉";
    $("#form4yxgcdq").click(function () {
        _smq.push(['custom', test, '意向购车地区', new Date()]);
    });
    $("#form4lxrxm").click(function () {
        _smq.push(['custom', test, '联系人姓名', new Date()]);
    });
    $("#form4sjh").click(function () {
        _smq.push(['custom', test, '手机号', new Date()]);
    });
    $("#form4xycpp").click(function () {
        _smq.push(['custom', test, '现有车辆品牌', new Date()]);
    });
    $("#form4czcx").click(function () {
        _smq.push(['custom', test, '车主车型', new Date()]);
    });
    $("#form4spdq").click(function () {
        _smq.push(['custom', test, '上牌地区', new Date()]);
    });
    $("#form4xslc").click(function () {
        _smq.push(['custom', test, '行驶里程', new Date()]);
    });
    $("#form4yxcx").click(function () {
        _smq.push(['custom', test, '意向车型', new Date()]);
    });
    $("#form4jg").click(function () {
        _smq.push(['custom', test, '价格', new Date()]);
    });
});

//初始化城市区域选择列表
function initCityList(currentCityInputId,selectorId) {
    var currentCityName = $("#" + currentCityInputId).html();
    var currentCityID = $("#" + currentCityInputId).attr("citynameid");
    var citySelector = $("#" + selectorId);
    $.ajax({
        type: "POST",  //提交方式
        url: path + "/openCities",//路径
        success: function (result) {//返回数据根据结果进行相应的处理
            var json = $.parseJSON(result);
            if (json != null && json.msg != null && json.msg != undefined) {
                var obj = eval(json.msg);
                citySelector.empty();
                citySelector.append("<option>请选择</option>");
                for (var i = 0; i < obj.length; i++) {
                    citySelector.append("<option>" + obj[i].REMARK.substr(2) + "</option>");
                }
                citySelector.val(currentCityName);
                citySelector.change();
            }
        }
    });
}



// 打开对应表单
function openForm(n, typeNum, sysId) {
    if (sysId == undefined) {
        sysId = "";
    }
    $("#saveSystemID").val("");
    $("#saveSystemID").val(sysId);
    if (n == 1) {
        _smq.push(['custom', trackingCodeType + '/买车表单_主视觉', '买车表单', new Date()]);
    }
    if (n == 2) {
        _smq.push(['custom', trackingCodeType + '/卖车表单_主视觉', '卖车表单', new Date()]);
    }
    if (n == 3) {
        _smq.push(['custom', trackingCodeType + '/我要置换表单_主视觉', '我要置换表单', new Date()]);
    }
    if (n == 4) {
        _smq.push(['custom', trackingCodeType + '/我要找车表单_主视觉', '我要找车表单', new Date()]);
    }

    if(typeNum == undefined){
        typeNum = 1;
    }
    cuecollectionType = typeNum;
    if(n == 1){
        $("#f1,#cufbackground").css("display","block");
        return false;
    }
    if(n == 2 ){
        $("#f2,#cufbackground").css("display","block");
        //initCityList("city","form2yxgcdq");
        return false;
    }
    if(n ==3){
        $("#f3,#cufbackground").css("display","block");
        //initCityList("city","form3yxgcdq");
        return false;
    }
    if(n == 4){
        $("#f4,#cufbackground").css("display","block");
        //initCityList("city","form4yxgcdq");
        return false;
    }
    $('body').addClass('active_w');

}

// ////////////////////////////////////////////////////////////////////////////////////////
var clock = '';
var nums = 60;
var btn;
function doFormLoop() {
    // alert("test");
    nums--;
    if (nums > 0) {
        // alert(nums);
        // btn.value = '重新获取 '+nums;
        btn.html('重新获取 ' + nums);
    } else {
        // alert("null");
        clearInterval(clock); // 清除js定时器
        btn.disabled = false;
        btn.value = '获取验证码';
        btn.html('获取验证码');
        nums = 60; // 重置时间
    }
}

// 验证手机号并发送验证码
function getFormMessageCode(thisBtn, num) {
    if (num == 1) {
        _smq.push(['custom', trackingCodeType + '/买车表单_主视觉', '获取验证码', new Date()]);
    }
    var tel = $("#form" + num + "sjh").val();
    var reg = /^0?1[3|4|5|8][0-9]\d{8}$/;
    if (reg.test(tel)) {
        $("#form" + num + "sjhPrompt").html('<span><img src="' + path + '"/images/manage/prompt.png"></span>请输入手机号');
        $("#form" + num + "sjhPrompt").attr("style", "display:none");
        btn = $("#" + thisBtn);
        if (btn.text() != "获取验证码") {
            return false;
        }
        btn.disabled = true; // 将按钮置为不可点击
        btn.html('重新获取 ' + nums);
        clock = setInterval(doFormLoop, 1000); // 一秒执行一次
        $.ajax({
            url: path + "/sendVerification",
            type: "post",
            data: "messageText=欢迎使用奥迪二手车，您的意向我们的客服会尽快联系您。本次的验证码为：&phoneNumber="
            + tel + "&codeType=1",
            success: function (res) {
                var json = JSON.parse(res);
                if (json.mes == "suc") {
                    // alert("发送成功");
                }
            }
        });
    } else {
        //	alert("号码不正确~");
        if (cuecollectionType == "1") {
            $("#form" + num + "sjhPrompt").html('<span><img src="' + path + '/images/manage/prompt.png"></span>号码不正确');
            $("#form" + num + "sjhPrompt").attr("style", "display:");
        }
    }
    ;
}

// 刷新图形验证码
function changeFormImgCode(num) {
    document.getElementById("showImgCode" + num).src = "imVerifyCode?time="
        + new Date().getTime() + "&codeType=1";
}

$(function () {
    //加载地区
    $.ajax({
        url: path + "/getcityList",
        data: "id=1",
        success: function (res) {
            var json = JSON.parse(res);
            //$("#form1yxgcdq").html("<option value='请选择'>请选择</option>");
            $("#form2spdq").html("<option value='请选择'>请选择</option>");
            $("#form3spdq").html("<option value='请选择'>请选择</option>");
            $("#form4spdq").html("<option value='请选择'>请选择</option>");
            for (i in json) {
                //$("#form1yxgcdq").append("<option value=" + json[i].CNNAME + ">" + json[i].CNNAME + "</option>");
                $("#form2spdq").append("<option value=" + json[i].CNNAME + ">" + json[i].CNNAME + "</option>");
                $("#form3spdq").append("<option value=" + json[i].CNNAME + ">" + json[i].CNNAME + "</option>");
                $("#form4spdq").append("<option value=" + json[i].CNNAME + ">" + json[i].CNNAME + "</option>");
            }
        }
    });

    /*    $.ajax({
     url: path + "/getconajaxPid",
     data: "id=280",
     success: function (res) {
     var json = JSON.parse(res);
     $("#carPtypeId").html("<option value='请选择'>请选择</option>");
     $("#carPtypeIds").html("<option value='请选择'>请选择</option>");
     $("#carPtypeIdss").html("<option value='请选择'>请选择</option>");
     for (i in json) {
     $("#carPtypeId").append("<option value=" + json[i].cd_cid + ">" + json[i].cd_cnname + "</option>");
     $("#carPtypeIds").append("<option value=" + json[i].cd_cid + ">" + json[i].cd_cnname + "</option>");
     $("#carPtypeIdss").append("<option value=" + json[i].cd_cid + ">" + json[i].cd_cnname + "</option>");
     }
     }
     });*/

    //加载颜色
    $.ajax({
        url: path + "/getconajax",
        data: "id=10070",
        success: function (res) {
            var json = JSON.parse(res);
            $("#form1ys").html("<option value='请选择'>请选择</option>");
            for (i in json) {
                $("#form1ys").append("<option value=" + json[i].cd_cnname + ">" + json[i].cd_cnname + "</option>");
            }
        }
    });
    //加载厂商
    $.ajax({
        type: "POST",
        url: path + "/getconajax",
        data: "id=163260",
        //async: false,//设置同步提交，这样可以将值返回
        success: function (data) {
            var json = JSON.parse(data);
            //
            var html = "<option>请选择</option>";
            for (var i = 0; i < json.length; i++) {
                html += "<option value='" + json[i].cd_cid + "' text='" + json[i].cd_cnname + "'>"
                    + json[i].cd_cnname + "</option>";
            }
            $("#form2xychcs").html(html);
            $("#form3xychcs").html(html);
            $("#form4xychcs").html(html);
        }
    });

    // 加载奥迪的车系
    $.ajax({
        url: path + "/getconajax",
        data: "id=280",
        // async:false,
        success: function (res) {
            var json = JSON.parse(res);
            for (i in json) {
                // 加载买车意向车系（都属奥迪品牌）
                $("#form1yxcxi").append(
                    "<option value='" + json[i].cd_cid + "' text='" + json[i].cd_cnname + "'>"
                    + json[i].cd_cnname + "</option>");
            }
        }
    });
});






//加载省份
$(document).ready(function(){
    var areaName ="";
    if(""!=$("#city").text()&&undefined!=$("#city").text()){
        areaName= $("#city").text();
    }else{
        areaName= $("#dealerShophomeArea").val();
    }
//$("#areaName").val(areaName)
//alert(areaName)
    var provinceName ="";
    $.ajax({
        url: path + "/getProvinceByCname",
        data:"cd_cnname="+areaName,
        success: function (res) {
            // console.log(res);
            if (res != null && res != "") {
                var json = JSON.parse(res);
                provinceName = json.cd_cnname;
            }
        }
    });
    //加载省份
    $.ajax({
        url: path + "/getProvinceByPid",
        data: "cd_pid=1",
        //async: false,
        success: function (res) {
            // console.log(res);
            var json = JSON.parse(res);
            //我要找车
            $(".cityForm").html("<option value='请选择'>请选择</option>");
            $(".cityFormsp").html("<option value='请选择'>请选择</option>");
            //我要置换
            $(".cityFormzh").html("<option value='请选择'>请选择</option>");
            $(".cityFormzhsp").html("<option value='请选择'>请选择</option>");
            //我要卖车
            $(".cityFormmc").html("<option value='请选择'>请选择</option>");
            $(".cityFormmcsp").html("<option value='请选择'>请选择</option>");
            //我要买车
            $(".cityFormmcdq").html("<option value='请选择'>请选择</option>");
            for (i in json) {
                //   alert(json[i].cd_cnname);
                //我要找车
                $(".cityForm").append("<option class='proInfo_"+i+"' value='"+json[i].cd_cnname+"'>"+ json[i].cd_cnname +"</option>");
                $(".cityFormsp").append("<option class='proInfo_"+i+"' value='"+json[i].cd_cnname+"'>"+ json[i].cd_cnname +"</option>");
                //我要置换
                $(".cityFormzh").append("<option class='proInfo_"+i+"' value='"+json[i].cd_cnname+"'>"+ json[i].cd_cnname +"</option>");
                $(".cityFormzhsp").append("<option class='proInfo_"+i+"' value='"+json[i].cd_cnname+"'>"+ json[i].cd_cnname +"</option>");
                //我要卖车
                $(".cityFormmc").append("<option class='proInfo_"+i+"' value='"+json[i].cd_cnname+"'>"+ json[i].cd_cnname +"</option>");
                $(".cityFormmcsp").append("<option class='proInfo_"+i+"' value='"+json[i].cd_cnname+"'>"+ json[i].cd_cnname +"</option>");
                //我要买车
                $(".cityFormmcdq").append("<option class='proInfo_"+i+"' value='"+json[i].cd_cnname+"'>"+ json[i].cd_cnname +"</option>");
                if(json[i].cd_cnname==provinceName){
                    var classop = "proInfo_"+i;
                    $(".classop").attr("selected",true);
                    $("#provinceText1").text(provinceName);
                    $("#provinceText2").text(provinceName);
                    $("#provinceText3").text(provinceName);
                    $("#provinceText4").text(provinceName);
                    // $(".select").find("p").first().html(provinceName);
                    // var forms=$('.chengshi').val();
                    // $('.chengshi').append("<option selected='selected'>" + areaName + "</option>");

                    //$("#cityText4").text(areaName);
                    getProByCitymcdq(provinceName,areaName);
                    getProByCitymc(provinceName,areaName);
                    getProByCityzh(provinceName,areaName);
                    getProByCity(provinceName,areaName);
                    /* $("#cityText1").text(areaName);
                     $("#cityText2").text(areaName);
                     $("#cityText3").text(areaName);
                     $("#provinceText-p").text(areaName);*/
                }
            }
        }
    });

});




//加载车辆品牌
function selectXYPingPai(thisid, changshangid, num) {
    jugeForm(thisid, 1);
    $.ajax({
        url: path + "/getconajax",
        data: "id=" + changshangid,
        // async:false,
        success: function (res) {
            var json = JSON.parse(res);
            var html = "<option>请选择</option>";

            for (i in json) {
                var cd_cnname = json[i].cd_cnname;
            }
            if (num == 2) {
                $("#form2xychpp").html(html);
            }
            if (num == 3) {
                $("#form3xychpp").html(html);
            }
            if (num == 4) {
                $("#form4xychpp").html(html);
            }
        }
    });
}

//清空
function qingkong(type) {
    if (type == 1) {
        $(".select").find("p").html('请选择');
        $(".select2").find("p").html('请选择');
    }
    if (type == 2) {
        $(".select2").find("p").html('请选择');
    }
}

// 加载现有车系
function selectXYCheXi(thisid, pinpaiId, num) {
    // alert(pinpaiId);
    qingkong(1);
    jugeForm(thisid, 1);
    $.ajax({
        url: path + "/getconajax",
        data: "id=" + pinpaiId,
        // async:false,
        success: function (res) {
            var json = JSON.parse(res);
            if (num == 2 || num == 3) {
                $("#form2xycxi").html("<option value='请选择'>请选择</option>");
                for (i in json) {
                    $("#form2xycxi").append(
                        "<option value='" + json[i].cd_cid + "'>"
                        + json[i].cd_cnname + "</option>");
                }
            } else {
                $("#form" + num + "xyccxi").html("<option value='请选择'>请选择</option>");
                for (i in json) {
                    $("#form" + num + "xyccxi").append(
                        "<option value='" + json[i].cd_cid + "'>"
                        + json[i].cd_cnname + "</option>");
                }
            }
        }
    });
}

// 加载现有车型
function selectXYCheXing(thisid, chexiId, num) {// chexiId车系Id，num表单类型1；2；3
    qingkong(2);
    jugeForm(thisid, 1);
    $.ajax({
        url: path + "/getconajax",
        data: "id=" + chexiId,
        success: function (res) {
            var json = JSON.parse(res);
            $("#form" + num + "xyccxing").html('<li class="first"><a href="javascript:;" value="请选择">请选择</a></li>');
            for (i in json) {
                // 加载意向车型
                $("#form" + num + "xyccxing").append('<li><a href="javascript:;" value="' + json[i].cd_cid + '">' + json[i].cd_cnname + '</a></li>');
            }
            $(".select .type-down li a").click(function () {
                var _this = $(this);
                var txt = _this.html();
                var thisvalue = _this.attr("value");
                if (_this.parent().parent().parent().hasClass("type-down-oz")) {
                    _this.parent().parent().parent().parent().find("p").html(txt);
                } else {
                    _this.parent().parent().parent().find("p").html(txt);
                    _this.parent().parent().parent().find("ul").attr("value", thisvalue);
                    _this.parent().parent().parent().removeClass('active');
                }
            });
        }
    });
}

// 加载意向车型
function selectYXCheXing(thisid, chexiId, num) {// chexiId车系Id，num表单类型1；2；3
    qingkong(2);
    jugeForm(thisid, 1);
    if (chexiId != "请选择") {
        $.ajax({
            url: path + "/getconajax",
            data: "id=" + chexiId,
            success: function (res) {
                var json = JSON.parse(res);
                $("#form" + num + "yxcxing").html("<li class='first'><a href='javascript:;' value='请选择'>请选择</a></li>");
                for (i in json) {
                    // 加载意向车型
                    $("#form" + num + "yxcxing").append("<li><a href='javascript:;' value='" + json[i].cd_cid + "'>" + json[i].cd_cnname + "</a></li>");
                }

                $(".select .type-down li a").click(function () {
                    var _this = $(this);
                    var txt = _this.html();
                    var thisvalue = _this.attr("value");
                    if (thisvalue == "undefined" || thisvalue == undefined) {
                        thisvalue = "";
                    }
                    if (_this.parent().parent().parent().hasClass("type-down-oz")) {
                        _this.parent().parent().parent().parent().find("p").html(txt);
                    } else {
                        _this.parent().parent().parent().find("p").html(txt);
                        _this.parent().parent().parent().find("ul").attr("value", thisvalue);
                        _this.parent().parent().parent().removeClass('active');
                    }
                });
            }
        });
    } else {
        $("#form" + num + "yxcxing").html("<option value='请选择'>请先选择车系</option>");
    }

}

// 验证表单时间格式
function checkDateTime(date) {
    var reg = /^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/;
    var r = date.match(reg);
    if (r == null) {
        return false;
    } else {
        return true;
    }
}

//表单验证
function jugeForm(id, type) {
    var text = "";
    if (type == 1) {
        text = "请选择";
    }
    if ($("#" + id).val() == text || $("#" + id).attr("value") == text) {
        $("#" + id + "Prompt").attr("style", "display: ");
    } else {
        $("#" + id + "Prompt").attr("style", "display: none");
    }
}


//验证内容是否是数字
function jugeNumber(id, type) {
    if ($("#" + id).val() != "") {
        if (!isNaN($("#" + id).val())) {
            $("#" + id + "Prompt").html('<span><img src="' + path + '/images/manage/prompt.png"></span>请输入价格（万元）');
            $("#" + id + "Prompt").attr("style", "display: none");
        } else {
            $("#" + id + "Prompt").html('<span><img src="' + path + '/images/manage/prompt.png"></span>格式错误，请输入数字');
            $("#" + id + "Prompt").attr("style", "display: ");
        }
    } else {
        jugeForm(id, type);
    }

}

//验证手机号
function jugeSjh(id, type) {
    var reg = /^0?1[3|4|5|8][0-9]\d{8}$/;
    if ($("#" + id).val() == "") {
        // f = false;
        phoneFlag = false;
        $("#form" + type + "sjhPrompt").html("<span><img src='" + path + "/images/manage/prompt.png'></span>请输入手机号码");
        $("#form" + type + "sjhPrompt").attr("style", "display:;");
    } else {
        if (reg.test($("#" + id).val())) {
            // f = true;
            phoneFlag = true;
            $("#form" + type + "sjhPrompt").html("<span><img src='" + path + "/images/manage/prompt.png'></span>请输入手机号码");
            $("#form" + type + "sjhPrompt").attr("style", "display: none;");
        } else {
            // f = false;
            phoneFlag = false;
            $("#form" + type + "sjhPrompt").html("<span><img src='" + path + "/images/manage/prompt.png'></span>手机号码不正确");
            $("#form" + type + "sjhPrompt").attr("style", "display:;");
        }
    }
    // return f;
    return  phoneFlag;
}

//验证图形验证码
function jugeTxYzm(id, type) {
    var imgCode = $("#" + id).val();
    if (imgCode == "") {
        //f = false;
        imgCodeFalg = false;
        $("#imgCode" + type + "Prompt").html("<span><img src='" + path + "/images/manage/prompt.png'></span>请输入图形验证码");
        $("#imgCode" + type + "Prompt").attr("style", "display:;");
    } else {
        $.ajax({
            url: path + "/jugeimgCode",
            data: "formImgCode=" + imgCode + "&codeType=1",
            async: false,
            type: "post",
            success: function (res) {
                res = JSON.parse(res);
                if (res == "true") {
                    // f = true;
                    imgCodeFalg = true;
                    $("#imgCode" + type + "Prompt").attr("style", "display:none;");
                } else {
                    imgCodeFalg = false;
                    //  f = false;
                    $("#imgCode" + type + "Prompt").html("<span><img src='" + path + "/images/manage/prompt.png'></span>图形验证码错误");
                    $("#imgCode" + type + "Prompt").attr("style", "display:;");
                }
            }
        });
    }
    // return f;
    return imgCodeFalg;
}

//验证手机验证码
function jugeSjYzm(id, type) {
    var phoCode = $("#" + id).val();
    if (phoCode == "") {
        //  f = false;
        phoneFlag = false;
        $("#phoCode" + type + "Prompt").html("<span><img src='" + path + "/images/manage/prompt.png'></span>请输入验证码");
        $("#phoCode" + type + "Prompt").attr("style", "display:;");
    } else {
        $.ajax({
            url: path + "/jugephoCode",
            data: "formPhoCode=" + phoCode + "&codeType=1",
            async: false,
            type: "post",

            success: function (res) {
                res = JSON.parse(res);
                if (res == "true") {
                    phoneFlag = true;
                    // f = true;
                    $("#phoCode" + type + "Prompt").html("<span><img src='" + path + "/images/manage/prompt.png'></span>请输入验证码");
                    $("#phoCode" + type + "Prompt").attr("style", "display:none;");
                } else {
                    phoneFlag = false;
                    // f = false;
                    $("#phoCode" + type + "Prompt").html("<span><img src='" + path + "/images/manage/prompt.png'></span>验证码错误");
                    $("#phoCode" + type + "Prompt").attr("style", "display:;");
                }
            }
        });
    }
    //return f;
    return phoneFlag;
}

/*
 function setCarCid(type){
 /!* $("#carCtypeId").html("<option value='请选择'>请选择</option>");
 $("#carCtypeId").attr("id","");
 *!/
 if("1"==type){
 var id =  $('#carPtypeId option:selected').val();
 $("#carCtypeId").parent().find("p").html("请选择");
 $("#carCtypeId").parent().find("p").attr("id","");
 $("#carCtypeId").empty();
 }if("2"==type)
 {
 var id =  $('#carPtypeIds option:selected').val();
 $("#carCtypeIds").parent().find("p").html("请选择");
 $("#carCtypeIds").parent().find("p").attr("id","");
 $("#carCty peIds").empty();
 }if("3"==type)
 {
 var id =  $('#carPtypeIdss option:selected').val();
 $("#carCtypeIdss").parent().find("p").html("请选择");
 $("#carCtypeIdss").parent().find("p").attr("id","");
 $("#carCtypeIdss").empty();
 }
 $.ajax({
 url: path + "/getconajaxPid",
 data: "id="+id,
 success: function (res) {
 var json = JSON.parse(res);
 if("1"==type){
 $("#carCtypeId").html("<option value='请选择'>请选择</option>");
 for (i in json) {
 $("#carCtypeId").append("<option value=" + json[i].cd_cid + ">" + json[i].cd_cnname + "</option>");
 }
 }if("2"==type){
 $("#carCtypeIds").html("<option value='请选择'>请选择</option>");
 for (i in json) {
 $("#carCtypeIds").append("<option value=" + json[i].cd_cid + ">" + json[i].cd_cnname + "</option>");
 }
 }if("3"==type){
 $("#carCtypeIdss").html("<option value='请选择'>请选择</option>");
 for (i in json) {
 $("#carCtypeIdss").append("<option value=" + json[i].cd_cid + ">" + json[i].cd_cnname + "</option>");
 }
 }
 }
 });
 }*/
var phoneFlag = false;
var codeFlag = false;
var phoneCodeFalg = false;
var imgCodeFalg = false;
var priceFlag = false;
var numFlag = false;
// 验证表单内容
function checkForm(num) {
    var f1 = false;
    var f2 = true;
    var listFlag = new Array();
    jugeSjh("form" + num + "sjh", num);
    priceFlag = checkNum("form" + num + "jg");
    numFlag = checkNum("form" + num + "xslc");
    if (num == 1) {
        codeFlag = jugeTxYzm("imgCode" + num, num);
        phoneCodeFalg = jugeSjYzm("phoCode" + num, num);
        var list = new Array();
        list.push("form1yxgcdq");
        //list.push("form1yxcxi");
        //list.push("form1yxcxing");
        //list.push("form1jg");
        list.push("form1lxrxm");
        list.push("form1sjh");
        list.push("form1spdq");
        /* list.push("imgCode1");
         list.push("phoCode1");*/
        for (i in list) {
            var val = $("#" + list[i]).val();
            if (val != "" && val != null && val != "请选择" && val != "请输入") {
                $("#" + list[i] + "Prompt").attr("style", "display: none");
                listFlag[i] = 0;
                //f1 = true;
            } else {
                if ($("#" + list[i]).attr("value") != undefined && $("#" + list[i]).attr("value") != "") {
                    listFlag[i] = 0;
                    //f1 = true;
                } else {
                    $("#" + list[i] + "Prompt").attr("style", "display: ");
                    listFlag[i] = 1;
                    //f2 = false;
                }
            }
        }
        /*  f1 = jugeSjh("form" + num + "sjh", num);
         f1 = jugeTxYzm("imgCode" + num, num);
         f1 = jugeSjYzm("phoCode" + num, num);*/
        if(0==listFlag[0]
            &&0==listFlag[1]
            &&0==listFlag[2]
            &&0==listFlag[3]
            &&phoneFlag
            &&codeFlag
            &&phoneCodeFalg
            &&imgCodeFalg
            &&priceFlag
            &&numFlag
        ){
            f=true;
        }else{
            f= false;
        }
        /*     if (f1 == true && f2 == true) {
         f = true;
         } else {
         f = false;
         }*/
    }
    if (num == 2) {
        var list = new Array();
        list.push("form2yxgcdq");
        list.push("form2lxrxm");
        list.push("form2sjh");
        // list.push("form2xycpp");
        // list.push("form2czcx");
        list.push("form2spdq");
        //list.push("form2xslc");
        //list.push("form2yxcx");
        //list.push("form2jg");
        for (i in list) {
            var val = $("#" + list[i]).val();
            if (val != "" && val != null && val != "请选择" && val != "请输入") {
                $("#" + list[i] + "Prompt").attr("style", "display: none");
                listFlag[i] = 0;
                // f1 = true;
            } else {
                if ($("#" + list[i]).attr("value") != undefined && $("#" + list[i]).attr("value") != "") {
                    listFlag[i] = 0;
                    //   f1 = true;
                } else {
                    $("#" + list[i] + "Prompt").attr("style", "display: ");
                    listFlag[i] = 1;
                    // f2 = false;
                }
            }
        }
        if(0==listFlag[0]
            &&0==listFlag[1]
            &&0==listFlag[2]
            &&0==listFlag[3]
            &&phoneFlag
            &&numFlag
            &&priceFlag
        ){
            f=true;
        }else{
            f= false;
        }
        /*  if (f1 == true) {
         f = true;
         } else {
         f = false;
         }*/
    }
    if (num == 3) {
        var list = new Array();
        list.push("form3yxgcdq");
        list.push("form3lxrxm");
        list.push("form3sjh");
        //list.push("form3xycpp");
        //list.push("form3czcx");
        list.push("form3spdq");
        //list.push("form3xslc");
        //list.push("form3yxcx");
        //phoneFlag = jugeSjh("form" + num + "sjh", num);
        for (i in list) {
            var val = $("#" + list[i]).val();
            if (val != "" && val != null && val != "请选择" && val != "请输入") {
                $("#" + list[i] + "Prompt").attr("style", "display: none");
                listFlag[i] = 0;
                //f1 = true;
            } else {
                if ($("#" + list[i]).attr("value") != undefined && $("#" + list[i]).attr("value") != "") {
                    listFlag[i] = 0;
                    //f1 = true;
                } else {
                    $("#" + list[i] + "Prompt").attr("style", "display: ");
                    listFlag[i] = 1;
                    // f2 = false;
                }
            }
        }
        if(0==listFlag[0]
            &&0==listFlag[1]
            &&0==listFlag[2]
            &&0==listFlag[3]
            &&phoneFlag
            &&numFlag
            &&priceFlag
        ){
            f=true;
        }else{
            f= false;sa
        }

        /* if (f1 == true) {
         f = true;
         } else {
         f = false;
         }*/
    }
    if(num==4){
        var list = new Array();
        list.push("form4yxgcdq");
        list.push("form4lxrxm");
        list.push("form4sjh");
        //list.push("form4xycpp");
        //list.push("form4czcx");
        list.push("form4spdq");
        //list.push("form4xslc");
        //list.push("form4yxcx");
        //phoneFlag = jugeSjh("form" + num + "sjh", num);
        for (i in list) {
            var val = $("#" + list[i]).val();
            if (val != "" && val != null && val != "请选择" && val != "请输入") {
                $("#" + list[i] + "Prompt").attr("style", "display: none");
                listFlag[i] = 0;
                // f1 = true;
            } else {
                if ($("#" + list[i]).attr("value") != undefined && $("#" + list[i]).attr("value") != "") {
                    listFlag[i] = 0;
                    //f1 = true;
                } else {
                    $("#" + list[i] + "Prompt").attr("style", "display: ");
                    listFlag[i] = 1;
                    // f2 = false;
                }
            }
        }
        /*     if (f1 == true) {
         f = true;
         } else {
         f = false;
         }*/
        if(0==listFlag[0]
            &&0==listFlag[1]
            &&0==listFlag[2]
            &&0==listFlag[3]
            &&phoneFlag
            &&numFlag
            &&priceFlag
        ){
            f=true;
        }else{
            f= false;
        }

    }
    return f;
}
/*function  checkAllFlag (listFlag) {
 if(0==listFlag[1]
 &&0==listFlag[2]
 &&0==listFlag[3]
 &&0==listFlag[4]
 &&0==listFlag[5]
 &&0==listFlag[6]
 &&0==listFlag[7]
 &&0==listFlag[8]
 &&true==phoneFlag
 &&true==codeFlag
 &&true==phoneCodeFalg
 ){
 f=true;
 }else{
 f= false;
 }
 }*/
//校验数字
function checkNum(id) {
    var num = $("#" + id).val();
    var flagNum = false;
    if(""!=num){
        if(!isNaN(num)){
            flagNum = true;
        }else{
            flagNum = false;
        }
    }else{
        flagNum = true;
    }
    return  flagNum;
}

// // //异步加载省份对应的城市信息
// function getProByCity(defaltCity){
//     var text =$('#form5yxgcdq option:selected') .val();
//     var forms=$("#form4yxgcdq");
//     // alert(text);
//     // defaltCity="杭州";
//     $.ajax({
//         url: path + "/getCityByPid",//路径
//         data:"cd_cnname="+text,
//         success: function (result) {//返回数据根据结果进行相应的处理
//             console.log(result);
//             var json = $.parseJSON(result);
//             if (json != null && json != undefined) {
//                 // var obj = eval(json);
//                 // console.log(json);
//                 forms.empty();
//                 forms.append("<option>请选择</option>");
//                 for (var i = 0; i < json.length; i++) {
//                     forms.append("<option  value='"+json[i].cd_cnname+"'>"+ json[i].cd_cnname +"</option>");
//                 }
//                 if(defaltCity == null || defaltCity == undefined){
//                     defaltCity="请选择";
//                 }
//                 forms.val("请选择");
//                 forms.change();
//                 forms.val(defaltCity);
//                 forms.change();
//             }
//         }
//     })
// }


// 我要找车
// 异步加载意向购车地区省份对应的城市信息
function getProByCity(provinceName,areaName){
    var text ="";
    if(""==provinceName||undefined==provinceName){
        text =$('.cityForm option:selected') .val();
        $("#cityText1").text("请选择");
    }else{
        text = provinceName;
    }

    //var text =$('.cityForm option:selected') .val();
    var forms=$('.chengshi');
    $.ajax({
        url: path + "/getCityByPid",//路径
        data:"cd_cnname="+text,
        success: function (result) {//返回数据根据结果进行相应的处理
            // console.log(result);
            var json = $.parseJSON(result);
            if (json != null && json != undefined) {
                forms.empty();
                forms.append("<option>请选择</option>");
                for (var i = 0; i < json.length; i++) {
                    forms.append("<option  value='"+json[i].cd_cnname+"'>"+ json[i].cd_cnname +"</option>");
                }
                if (""!=areaName&&undefined!=areaName){
                    forms.val(areaName);
                }else{
                    forms.val("请选择");
                }
                forms.change();
            }
        }
    })
}
//异步加载上牌地区省份对应的城市信息
function getProByCitysp(){
    var text =$('.cityFormsp option:selected') .val();
    var forms=$('.chengshisp');
    $.ajax({
        url: path + "/getCityByPid",//路径
        data:"cd_cnname="+text,
        success: function (result) {//返回数据根据结果进行相应的处理
            console.log(result);
            var json = $.parseJSON(result);
            if (json != null && json != undefined) {
                forms.empty();
                forms.append("<option>请选择</option>");
                for (var i = 0; i < json.length; i++) {
                    forms.append("<option  value='"+json[i].cd_cnname+"'>"+ json[i].cd_cnname +"</option>");
                }
                forms.val("请选择");
                forms.change();
            }
        }
    })
}

// 我要置换
// 异步加载意向购车地区省份对应的城市信息
function getProByCityzh(provinceName,areaName){
    var text ="";
    if(""==provinceName||undefined==provinceName){
        text =$('.cityFormzh option:selected') .val();
        $("#cityText2").text("请选择");
    }else{
        text = provinceName;
    }
    // var text =$('.cityFormzh option:selected') .val();
    var forms=$('.chengshizh');
    $.ajax({
        url: path + "/getCityByPid",//路径
        data:"cd_cnname="+text,
        success: function (result) {//返回数据根据结果进行相应的处理
            // console.log(result);
            var json = $.parseJSON(result);
            if (json != null && json != undefined) {
                forms.empty();
                forms.append("<option>请选择</option>");
                for (var i = 0; i < json.length; i++) {
                    forms.append("<option  value='"+json[i].cd_cnname+"'>"+ json[i].cd_cnname +"</option>");
                }
                if (""!=areaName&&undefined!=areaName){
                    forms.val(areaName);
                }else{
                    forms.val("请选择");
                }
                forms.change();
            }
        }
    })
}
//异步加载上牌地区省份对应的城市信息
function getProByCityzhsp(){
    var text =$('.cityFormzhsp option:selected') .val();
    var forms=$('.chengshizhsp');
    $.ajax({
        url: path + "/getCityByPid",//路径
        data:"cd_cnname="+text,
        success: function (result) {//返回数据根据结果进行相应的处理
            console.log(result);
            var json = $.parseJSON(result);
            if (json != null && json != undefined) {
                forms.empty();
                forms.append("<option>请选择</option>");
                for (var i = 0; i < json.length; i++) {
                    forms.append("<option  value='"+json[i].cd_cnname+"'>"+ json[i].cd_cnname +"</option>");
                }
                forms.val("请选择");
                forms.change();
            }
        }
    })
}

// 我要卖车
// 异步加载意向购车地区省份对应的城市信息
function getProByCitymc(provinceName,areaName){
    var text ="";
    if(""==provinceName||undefined==provinceName){
        text =$('.cityFormmc option:selected') .val();
        $("#cityText3").text("请选择");
    }else{
        text = provinceName;
    }
    // var text =$('.cityFormmc option:selected') .val();
    var forms=$('.chengshimc');
    $.ajax({
        url: path + "/getCityByPid",//路径
        data:"cd_cnname="+text,
        success: function (result) {//返回数据根据结果进行相应的处理
            // console.log(result);
            var json = $.parseJSON(result);
            if (json != null && json != undefined) {
                forms.empty();
                forms.append("<option>请选择</option>");
                for (var i = 0; i < json.length; i++) {
                    forms.append("<option  value='"+json[i].cd_cnname+"'>"+ json[i].cd_cnname +"</option>");
                }
                if (""!=areaName&&undefined!=areaName){
                    forms.val(areaName);
                }else{
                    forms.val("请选择");
                }
                forms.change();
            }
        }
    })
}
//异步加载上牌地区省份对应的城市信息
function getProByCitymcsp(){
    var text =$('.cityFormmcsp option:selected') .val();
    var forms=$('.chengshimcsp');
    $.ajax({
        url: path + "/getCityByPid",//路径
        data:"cd_cnname="+text,
        success: function (result) {//返回数据根据结果进行相应的处理
            console.log(result);
            var json = $.parseJSON(result);
            if (json != null && json != undefined) {
                forms.empty();
                forms.append("<option>请选择</option>");
                for (var i = 0; i < json.length; i++) {
                    forms.append("<option  value='"+json[i].cd_cnname+"'>"+ json[i].cd_cnname +"</option>");
                }
                forms.val("请选择");
                forms.change();
            }
        }
    })
}
// 我要买车
// 异步加载意向购车地区省份对应的城市信息
function getProByCitymcdq(provinceName,areaName){
    var text ="";
    if(""==provinceName||undefined==provinceName){
        text =$('.cityFormmcdq option:selected') .val();
        $("#provinceText-p").text("请选择");
        //$("#provinceText-p").val("请选择");
    }else{
        text = provinceName;

    }

    var forms=$('.chengshimcdq');
    $.ajax({
        url: path + "/getCityByPid",//路径
        data:"cd_cnname="+text,
        success: function (result) {//返回数据根据结果进行相应的处理
            // console.log(result);
            var json = $.parseJSON(result);
            if (json != null && json != undefined) {
                forms.empty();
                forms.append("<option>请选择</option>");
                for (var i = 0; i < json.length; i++) {
                    forms.append("<option  value='"+json[i].cd_cnname+"'>"+ json[i].cd_cnname +"</option>");
                }
                if (""!=areaName&&undefined!=areaName){
                    forms.val(areaName);
                }else{
                    forms.val("请选择");
                }
                forms.change();
            }
        }
    })
}
